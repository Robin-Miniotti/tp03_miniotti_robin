<div class="pollution-container">

  <h2>Liste des pollutions</h2>
  <div *ngIf="selectedPollutionId === null" class="pollution-list">
    <div class="search-container">
      <form class="filter-form">
        <div class="form-group">
          <label for="titleSearch">Rechercher par titre:</label>
          <input type="text" 
                 id="titleSearch"
                 [(ngModel)]="titleSearch"
                 name="titleSearch"              
                 placeholder="Entrez le titre" 
                 class="search-input"/>
        </div>
        
        <div class="form-group">
          <label for="typeSearch">Filtrer par type:</label>
          <select id="typeSearch" 
                  [(ngModel)]="typeSearch"
                  name="typeSearch"
                  class="search-select">
            <option value="">Tous les types</option>
            <option *ngFor="let type of availableTypes" [value]="type">
              {{ type }}
            </option>
          </select>
        </div>
        
        <div class="form-buttons">
          <button type="button" (click)="filterPollutions()" class="filter-btn">
            Filtrer
          </button>
          <button type="button" (click)="clearFilters()" class="clear-btn">
            Effacer
          </button>
        </div>
      </form>
    </div>
    <ul>
      <li *ngFor="let pollution of pollutions$ | async">
        <strong>{{ pollution.title }}:</strong>
        <img [src]="pollution.photoUrl" alt="Photo de la pollution" class="pollution-photo"/>
        <div class="action-buttons">
          <button (click)="showDetails(pollution.id)" class="details-btn">Voir détails</button>
          <button (click)="deletePollution(pollution.id)" class="delete-btn">Delete</button>
        </div>
      </li>
    </ul>
  </div>

  <div *ngIf="selectedPollutionId !== null" class="details-section">
    <div class="details-header">
      <h3>Détails de la pollution</h3>
      <button (click)="hideDetails()" class="close-btn">← Retour à la liste</button>
    </div>
    <app-pollution-details [pollutionId]="selectedPollutionId!"></app-pollution-details>
  </div>
</div>
